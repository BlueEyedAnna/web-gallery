<!doctype html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>
        Добавление
    </title>

    {# иконка маленькая во вкладке браузера#}
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">

    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='assets/bootstrap/css/bootstrap.min.css') }}">
    {#    <link rel="stylesheet" type="text/css"#}
    {#          href="{{ url_for('static', filename='css/login_forms.css') }}? version = {{ ver }}">#}
    <link rel="stylesheet" type="text/css"
          href="{{ url_for('static', filename='css/creation.css') }}? version = {{ ver }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='/assets/css/Animation-Cards.css') }}">

</head>

<body>
<script type="text/javascript" src="{{ url_for('static', filename='assets/jquerymin.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='assets/bootstrap/js/bootstrap.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='assets/js/bs-init.js') }}"></script>

<header>
    <div class="container">
        <div class="heading clearfix">
            <img src="/static/img/logo.png" alt="Галерея" class="logo"> {#логотип#}
            <nav>
                <ul class="menu">
                    {% if is_authenticated %}
                        <li>
                            <button href="/login" data-bs-target="#modal-2" data-bs-toggle="modal" type="button"
                                    id="loginBtn">Выйти
                            </button>
                        </li>
                    {% else %}
                        <li>
                            <button href="/login" data-bs-target="#modal-1" data-bs-toggle="modal" type="button"
                                    id="loginBtn">Войти
                            </button>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    </div>
</header>

<div class="actual_exhibitions">
    <h4>Актуальные выставки</h4>

    <a class="btn btn-outline-success"
       style="position: absolute;left: calc(50% - 215px);top: 120px;border-radius: 13px;width: 400px;font-size: 1.3rem;" ]
       href="/add_exhibition">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash" viewBox="0 1 20 20">
            <path fill="evenodd"
                  d="M13.388,9.624h-3.011v-3.01c0-0.208-0.168-0.377-0.376-0.377S9.624,6.405,9.624,6.613v3.01H6.613c-0.208,0-0.376,0.168-0.376,0.376s0.168,0.376,0.376,0.376h3.011v3.01c0,0.208,0.168,0.378,0.376,0.378s0.376-0.17,0.376-0.378v-3.01h3.011c0.207,0,0.377-0.168,0.377-0.376S13.595,9.624,13.388,9.624z M10,1.344c-4.781,0-8.656,3.875-8.656,8.656c0,4.781,3.875,8.656,8.656,8.656c4.781,0,8.656-3.875,8.656-8.656C18.656,5.219,14.781,1.344,10,1.344z M10,17.903c-4.365,0-7.904-3.538-7.904-7.903S5.635,2.096,10,2.096S17.903,5.635,17.903,10S14.365,17.903,10,17.903z"></path>
        </svg>
        Добавить
    </a>

    <a id="exhibitions_count" hidden>{{ exhibitions_count }}</a>

    {% for block in exhibitions %}
        {% set block_ind = loop.index %}

        <div class="row space-rows">
            {% for exhibition in block %}
                {% set exhibition_ind = loop.index %}

                <form method="get" action="#" name="t{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}" hidden>
                    <input type="text" name="id" value="{{ exhibition['_id'] }}">
                </form>

                <form method="post" action="/delete_exhibition" name="del{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}" hidden>
                    <input type="text" name="id" value="{{ exhibition['_id'] }}">
                </form>

                <form method="post" action="/modify_exhibition" name="mod{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}" hidden>
                    <input type="text" name="id" value="{{ exhibition['_id'] }}">
                </form>

                <div class="col">
                    <div class="card cards-shadown cards-hover aos-init aos-animate" data-aos=flip-left
                         data-aos-duration="950" style="border-radius: 30px;border: none;">

                        <div class="card-header"
                             onclick="document.forms['t{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}'].submit();">
                            <div class="cardheader-text">
                                {{ exhibition['about'] }}
                            </div>

                            <div style="position:absolute;top: 5px;right: 5px;width: 190px; height: 190px;display: flex;margin: auto;"
                                 id="photos">
                                {% for photo in exhibition['photos'] %}
                                    {% set id = (((block_ind - 1) * 2 + exhibition_ind - 1) * 100 + loop.index - 1)|string %}
                                    <img src="data:image/jpeg;base64, {{ photo }}"
                                         alt="slide" id="{{ id }}"
                                         style="display: none; max-height: 100%; max-width: 100%;margin: auto; border-radius: 15px;">
                                {% endfor %}
                            </div>
                        </div>

                        <div class="card-body">
                            <p class="card-text cardbody-sub-text"
                               onclick="document.forms['t{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}'].submit();">
                                {{ exhibition['name'] }}
                            </p>

                            <button type="button" class="btn btn-outline-danger"
                                    style="position: absolute; right: 15px; bottom: 5px; border-radius: 13px;"
                                    onclick="document.forms['del{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}'].submit();">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                          d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                </svg>
                                Удалить
                            </button>

                            <button type="button" class="btn btn-outline-primary"
                                    style="position: absolute; right: 135px; bottom: 5px; border-radius: 13px;"
                                    onclick="document.forms['mod{{ ((block_ind - 1) * 2 + exhibition_ind - 1) }}'].submit();">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="2 2 16 16">
                                    <path d="M17.498,11.697c-0.453-0.453-0.704-1.055-0.704-1.697c0-0.642,0.251-1.244,0.704-1.697c0.069-0.071,0.15-0.141,0.257-0.22c0.127-0.097,0.181-0.262,0.137-0.417c-0.164-0.558-0.388-1.093-0.662-1.597c-0.075-0.141-0.231-0.22-0.391-0.199c-0.13,0.02-0.238,0.027-0.336,0.027c-1.325,0-2.401-1.076-2.401-2.4c0-0.099,0.008-0.207,0.027-0.336c0.021-0.158-0.059-0.316-0.199-0.391c-0.503-0.274-1.039-0.498-1.597-0.662c-0.154-0.044-0.32,0.01-0.416,0.137c-0.079,0.106-0.148,0.188-0.22,0.257C11.244,2.956,10.643,3.207,10,3.207c-0.642,0-1.244-0.25-1.697-0.704c-0.071-0.069-0.141-0.15-0.22-0.257C7.987,2.119,7.821,2.065,7.667,2.109C7.109,2.275,6.571,2.497,6.07,2.771C5.929,2.846,5.85,3.004,5.871,3.162c0.02,0.129,0.027,0.237,0.027,0.336c0,1.325-1.076,2.4-2.401,2.4c-0.098,0-0.206-0.007-0.335-0.027C3.001,5.851,2.845,5.929,2.77,6.07C2.496,6.572,2.274,7.109,2.108,7.667c-0.044,0.154,0.01,0.32,0.137,0.417c0.106,0.079,0.187,0.148,0.256,0.22c0.938,0.936,0.938,2.458,0,3.394c-0.069,0.072-0.15,0.141-0.256,0.221c-0.127,0.096-0.181,0.262-0.137,0.416c0.166,0.557,0.388,1.096,0.662,1.596c0.075,0.143,0.231,0.221,0.392,0.199c0.129-0.02,0.237-0.027,0.335-0.027c1.325,0,2.401,1.076,2.401,2.402c0,0.098-0.007,0.205-0.027,0.334C5.85,16.996,5.929,17.154,6.07,17.23c0.501,0.273,1.04,0.496,1.597,0.66c0.154,0.047,0.32-0.008,0.417-0.137c0.079-0.105,0.148-0.186,0.22-0.256c0.454-0.453,1.055-0.703,1.697-0.703c0.643,0,1.244,0.25,1.697,0.703c0.071,0.07,0.141,0.15,0.22,0.256c0.073,0.098,0.188,0.152,0.307,0.152c0.036,0,0.073-0.004,0.109-0.016c0.558-0.164,1.096-0.387,1.597-0.66c0.141-0.076,0.22-0.234,0.199-0.393c-0.02-0.129-0.027-0.236-0.027-0.334c0-1.326,1.076-2.402,2.401-2.402c0.098,0,0.206,0.008,0.336,0.027c0.159,0.021,0.315-0.057,0.391-0.199c0.274-0.5,0.496-1.039,0.662-1.596c0.044-0.154-0.01-0.32-0.137-0.416C17.648,11.838,17.567,11.77,17.498,11.697 M16.671,13.334c-0.059-0.002-0.114-0.002-0.168-0.002c-1.749,0-3.173,1.422-3.173,3.172c0,0.053,0.002,0.109,0.004,0.166c-0.312,0.158-0.64,0.295-0.976,0.406c-0.039-0.045-0.077-0.086-0.115-0.123c-0.601-0.6-1.396-0.93-2.243-0.93s-1.643,0.33-2.243,0.93c-0.039,0.037-0.077,0.078-0.116,0.123c-0.336-0.111-0.664-0.248-0.976-0.406c0.002-0.057,0.004-0.113,0.004-0.166c0-1.75-1.423-3.172-3.172-3.172c-0.054,0-0.11,0-0.168,0.002c-0.158-0.312-0.293-0.639-0.405-0.975c0.044-0.039,0.085-0.078,0.124-0.115c1.236-1.236,1.236-3.25,0-4.486C3.009,7.719,2.969,7.68,2.924,7.642c0.112-0.336,0.247-0.664,0.405-0.976C3.387,6.668,3.443,6.67,3.497,6.67c1.75,0,3.172-1.423,3.172-3.172c0-0.054-0.002-0.11-0.004-0.168c0.312-0.158,0.64-0.293,0.976-0.405C7.68,2.969,7.719,3.01,7.757,3.048c0.6,0.6,1.396,0.93,2.243,0.93s1.643-0.33,2.243-0.93c0.038-0.039,0.076-0.079,0.115-0.123c0.336,0.112,0.663,0.247,0.976,0.405c-0.002,0.058-0.004,0.114-0.004,0.168c0,1.749,1.424,3.172,3.173,3.172c0.054,0,0.109-0.002,0.168-0.004c0.158,0.312,0.293,0.64,0.405,0.976c-0.045,0.038-0.086,0.077-0.124,0.116c-0.6,0.6-0.93,1.396-0.93,2.242c0,0.847,0.33,1.645,0.93,2.244c0.038,0.037,0.079,0.076,0.124,0.115C16.964,12.695,16.829,13.021,16.671,13.334 M10,5.417c-2.528,0-4.584,2.056-4.584,4.583c0,2.529,2.056,4.584,4.584,4.584s4.584-2.055,4.584-4.584C14.584,7.472,12.528,5.417,10,5.417 M10,13.812c-2.102,0-3.812-1.709-3.812-3.812c0-2.102,1.71-3.812,3.812-3.812c2.102,0,3.812,1.71,3.812,3.812C13.812,12.104,12.102,13.812,10,13.812"></path>
                                </svg>
                                Изменить
                            </button>
                        </div>

                    </div>
                </div>

            {% endfor %}
        </div>
    {% endfor %}

    <script type="text/javascript" src="{{ url_for('static', filename='scripts/exhibition.js') }}"></script>
</div>

{#<div class="cardContainer">#}
{#    <div id="createCard"></div>#}
{#    <div id="inputField"></div>#}
{#    <form id="change" action="/creation" method="post" name="change" enctype="multipart/form-data"#}
{#          style="display: none">#}
{##}
{#        # Выбор: выставку или экскурсию#}
{##}
{#        <p class="d-flex" style="max-width: 610px;">#}
{#            <label class="form-label d-inline-flex flex-column" style="margin-right: 40px;">Название</label>#}
{#            <input class="float-end form-control" type="text" name="name"#}
{#                   style="border-radius: 15px;font-size: 20px;">#}
{##}
{#        </p>#}
{#        <p class="d-flex" style="max-width: 610px;">#}
{#            <label class="form-label d-inline-flex flex-column" style="margin-right: 40px;">Описание</label>#}
{#            <input class="float-end form-control" type="text" name="about"#}
{#                   style="border-radius: 15px;font-size: 20px;">#}
{#        </p>#}
{##}
{#        <p class="d-flex" style="max-width: 610px;">#}
{#            <label class="form-label d-inline-flex flex-column" style="margin-right: 40px;">Фотографии</label>#}
{#            <input class="float-end form-control" type="file" name="photos" accept=".jpg, .jpeg, .png"#}
{#                   style="font-size: 20px;">#}
{#        </p>#}
{#    </form>#}
{#    <!--AddCardLink - when clicked it adds an input field, and the buttons for adding a card and closing the input field. -->#}
{#    <a id="addCardLink" href="#" onclick="displayInputField(); hideButton('addCardLink');"><i class="fas fa-plus"></i>#}
{#        Добавить выставку</a>#}
{#    <!--AddAnotherCardLink - when clicked should perform the same as AddCardLink except that it is hidden at first and is shown only when the close button is clicked. -->#}
{#    <a id="addAnotherCardLink" href="#" onclick="displayInputField(); hideButton('addAnotherCardLink');"><i#}
{#            class="fas fa-plus"></i> Add another Card</a>#}
{#</div>#}

<!-- Link to JavaScript -->
{#<script type="text/javascript" src="{{ url_for('static', filename='scripts/cards_changing.js') }}"></script>#}
</body>


<footer>
    <div class="footer-info clearfix">
        <div class="container">
            <div class="row">
                <div class="col" id="col-1">
                    <h3>Контакты</h3>
                    <p>e-mail: gareleya@mail.com</p>
                    <p>телефон: 515-15-15</p>
                </div>
                <div class="col">
                    <h3>Адрес</h3>
                    <p>г.Казань, ул.Профсоюзная, д.181</p>
                    <p>Ждём вас в нашей галерее!</p>
                </div>
            </div>
        </div>
    </div>
</footer>

{# модальное окно выхода #}
<div class="modal fade" role="dialog" tabindex="-2" id="modal-2">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="border: none;">
            <div class="modal-header" style="border: none;">
                <h4 class="modal-title" id="modal-title-out" style="font-weight: bold;">
                    Подтвердите выход
                </h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close2"></button>
            </div>
            <div class="modal-footer" style="border: none;">
                <form action="/logout" method="post" class="form-contact">
                    <input class="btn btn-danger clearfix" type="submit" value="Выйти"
                           style="font-weight: bold;font-size: 20px;"/>
                </form>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="{{ url_for('static', filename='scripts/modal.js') }}"></script>

</html>